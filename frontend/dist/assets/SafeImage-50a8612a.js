import{j as e}from"./ui-580b099c.js";import{r as s}from"./vendor-79b9f383.js";const a=({src:a,fallback:t="/placeholder.svg",timeoutMs:r=5e3,showLoadingState:o=!0,className:l="",...c})=>{const[i,n]=s.useState(null),[m,u]=s.useState(!0),[d,p]=s.useState(!1);return s.useEffect(()=>{let e=!0;const s=new Image;let o=!1;u(!0),p(!1),n(null);const l=window.setTimeout(()=>{!o&&e&&(n(t),u(!1),p(!0))},r);return s.onload=()=>{o=!0,e&&(n(a),u(!1),p(!1)),clearTimeout(l)},s.onerror=()=>{o=!0,e&&(n(t),u(!1),p(!0)),clearTimeout(l)},s.src=a,()=>{e=!1,clearTimeout(l)}},[a,t,r]),m&&o?e.jsxs("div",{className:`shimmer rounded animate-pulse ${l}`,style:{aspectRatio:"1/1",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40px"},role:"status","aria-label":"Loading image",children:[e.jsxs("svg",{className:"w-6 h-6 text-slate-600 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"sr-only",children:"Loading..."})]}):e.jsx("img",{src:i||t,className:`transition-opacity duration-300 ${l} ${d?"opacity-50 grayscale":"opacity-100"}`,loading:"lazy",...c,onError:e=>{const s=e.currentTarget;s.src!==t&&(s.src=t,p(!0))}})};export{a as S};
