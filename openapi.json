{
  "openapi": "3.1.0",
  "info": {
    "title": "SabiScore API",
    "description": "Football Prediction API with advanced analytics and odds comparison",
    "contact": {
      "name": "API Support",
      "email": "support@example.com"
    },
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/matches/upcoming": {
      "get": {
        "tags": [
          "matches"
        ],
        "summary": "Get Upcoming Matches",
        "description": "Get upcoming matches for predictions\n\nReturns matches scheduled within the next N days, optionally filtered by league.\nResults are cached for 5 minutes to optimize performance.",
        "operationId": "matches-get_upcoming_matches",
        "parameters": [
          {
            "name": "league",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by league (epl, bundesliga, laliga, etc)",
              "title": "League"
            },
            "description": "Filter by league (epl, bundesliga, laliga, etc)"
          },
          {
            "name": "days_ahead",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 30,
              "minimum": 1,
              "description": "Number of days to look ahead",
              "default": 7,
              "title": "Days Ahead"
            },
            "description": "Number of days to look ahead"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of matches to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of matches to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MatchListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/matches/{match_id}": {
      "get": {
        "tags": [
          "matches"
        ],
        "summary": "Get Match Detail",
        "description": "Get detailed information about a specific match\n\nIncludes team form, head-to-head history, odds movement, and prediction metadata.",
        "operationId": "matches-get_match_detail",
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Match Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MatchDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/matches/league/{league_name}": {
      "get": {
        "tags": [
          "matches"
        ],
        "summary": "Get Matches By League",
        "description": "Get all matches for a specific league\n\nUseful for league-specific analysis and historical performance tracking.",
        "operationId": "matches-get_matches_by_league",
        "parameters": [
          {
            "name": "league_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "League Name"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status (scheduled, live, finished)",
              "title": "Status"
            },
            "description": "Filter by status (scheduled, live, finished)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 200,
              "minimum": 1,
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MatchListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predictions/": {
      "post": {
        "tags": [
          "predictions"
        ],
        "summary": "Create Prediction",
        "description": "Generate comprehensive match prediction with value bet analysis\n\nPipeline:\n1. Fetch historical data (180k+ matches)\n2. Engineer 220+ features\n3. Run ensemble models (RF, XGBoost, LightGBM)\n4. Apply Platt calibration\n5. Detect value bets (min edge: 4.2%)\n6. Calculate Smart Kelly stakes (\u215b Kelly)\n\nTarget: <150ms response time @ 10k CCU",
        "operationId": "predictions-create_prediction",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MatchPredictionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PredictionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predictions/{match_id}": {
      "get": {
        "tags": [
          "predictions"
        ],
        "summary": "Get Prediction",
        "description": "Retrieve existing prediction for a match\n\nReturns cached prediction if available (< 1 hour old),\notherwise returns 404 prompting client to generate new prediction.",
        "operationId": "predictions-get_prediction",
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Match Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PredictionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predictions/value-bets/today": {
      "get": {
        "tags": [
          "predictions"
        ],
        "summary": "Get Todays Value Bets",
        "description": "Get all value bets for today's matches\n\nFilters:\n- min_edge: Minimum edge threshold (default: 4.2%)\n- min_confidence: Minimum model confidence (default: 70%)\n- league: Optional league filter\n\nReturns sorted by edge (highest first)",
        "operationId": "predictions-get_todays_value_bets",
        "parameters": [
          {
            "name": "min_edge",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.042,
              "title": "Min Edge"
            }
          },
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number",
              "default": 0.7,
              "title": "Min Confidence"
            }
          },
          {
            "name": "league",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "League"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ValueBetResponse"
                  },
                  "title": "Response Predictions-Get Todays Value Bets"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/odds/match/{match_id}": {
      "get": {
        "tags": [
          "odds"
        ],
        "summary": "Get Match Odds",
        "description": "Get odds history for a specific match\n\nReturns timestamped odds snapshots showing market movement over time.\nUseful for identifying line movement and CLV opportunities.",
        "operationId": "odds-get_match_odds",
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Match Id"
            }
          },
          {
            "name": "bookmaker",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by bookmaker",
              "title": "Bookmaker"
            },
            "description": "Filter by bookmaker"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of snapshots",
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of snapshots"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/OddsResponse"
                  },
                  "title": "Response Odds-Get Match Odds"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/odds/latest/{match_id}": {
      "get": {
        "tags": [
          "odds"
        ],
        "summary": "Get Latest Odds",
        "description": "Get the most recent odds from all bookmakers for a match\n\nReturns a dictionary mapping bookmaker names to their latest odds snapshot.\nIdeal for comparing lines across bookmakers to find best value.",
        "operationId": "odds-get_latest_odds",
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Match Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": {
                    "$ref": "#/components/schemas/OddsResponse"
                  },
                  "title": "Response Odds-Get Latest Odds"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/odds/movement/{match_id}": {
      "get": {
        "tags": [
          "odds"
        ],
        "summary": "Get Odds Movement",
        "description": "Analyze odds movement over time for a match\n\nReturns market movement metrics including:\n- Opening vs current odds\n- Direction and magnitude of movement\n- Volatility indicators\n- Steam move detection",
        "operationId": "odds-get_odds_movement",
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Match Id"
            }
          },
          {
            "name": "hours_back",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 168,
              "minimum": 1,
              "description": "Hours of history to analyze",
              "default": 24,
              "title": "Hours Back"
            },
            "description": "Hours of history to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/odds/best-line/{match_id}": {
      "get": {
        "tags": [
          "odds"
        ],
        "summary": "Get Best Line",
        "description": "Find the best available odds across all bookmakers for a specific outcome\n\nReturns the bookmaker offering the highest odds for the selected outcome,\nhelping users maximize potential returns.",
        "operationId": "odds-get_best_line",
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Match Id"
            }
          },
          {
            "name": "outcome",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Outcome type: home_win, draw, or away_win",
              "title": "Outcome"
            },
            "description": "Outcome type: home_win, draw, or away_win"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/odds/": {
      "post": {
        "tags": [
          "odds"
        ],
        "summary": "Create Odds Snapshot",
        "description": "Store a new odds snapshot (admin/scraper endpoint)\n\nUsed by automated scrapers to ingest real-time odds data from bookmakers.",
        "operationId": "odds-create_odds_snapshot",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OddsCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OddsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "summary": "Health Check",
        "description": "Enhanced health check with database and cache status",
        "operationId": "health_check",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/matches/search": {
      "get": {
        "summary": "Search Matches",
        "description": "Search for matches with filtering, pagination, and caching.",
        "operationId": "search_matches",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 2,
              "description": "Search query for teams or matches",
              "title": "Q"
            },
            "description": "Search query for teams or matches"
          },
          {
            "name": "league",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by league",
              "title": "League"
            },
            "description": "Filter by league"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "description": "Maximum results to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum results to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MatchSearchResponse"
                  },
                  "title": "Response Search Matches"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/insights": {
      "post": {
        "summary": "Generate Insights",
        "description": "Generate comprehensive betting insights for a match.\n\nThis endpoint analyzes a specific matchup and provides:\n- Win/draw/loss probabilities with confidence scores\n- Expected goals (xG) analysis\n- Value betting opportunities with Kelly criterion stakes\n- Monte Carlo simulation results with scenario analysis\n- Risk assessment and recommendations\n- AI-generated narrative explanation\n\nArgs:\n    body: Match details including matchup (e.g., \"Arsenal vs Chelsea\") and league (e.g., \"EPL\")\n\nReturns:\n    Comprehensive insights including predictions, betting analysis, and risk assessment\n\nRaises:\n    400: Invalid input parameters\n    503: Prediction model unavailable\n    500: Internal server error during insights generation",
        "operationId": "generate_insights",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InsightsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InsightsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/models/status": {
      "get": {
        "summary": "Model Status",
        "description": "Return model training metadata sourced from the models directory.",
        "operationId": "model_status",
        "parameters": [
          {
            "name": "league",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "League"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/metrics/cache": {
      "get": {
        "summary": "Cache Metrics",
        "description": "Expose cache metrics and current circuit breaker state.",
        "operationId": "cache_metrics",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CacheMetricsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "tags": [
          "Root"
        ],
        "summary": "API Root",
        "description": "Returns basic information about the API",
        "operationId": "Root-root",
        "responses": {
          "200": {
            "description": "Basic API information",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health Check",
        "description": "Health check endpoint for load balancers and monitoring",
        "operationId": "Health-health_check",
        "responses": {
          "200": {
            "description": "Health status",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/ready": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Readiness Check",
        "description": "Readiness check for Kubernetes and orchestration systems",
        "operationId": "Health-readiness_check",
        "responses": {
          "200": {
            "description": "Readiness status",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/stats/database": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Database Statistics",
        "description": "Database connection pool statistics (development only)",
        "operationId": "Health-database_stats",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/info": {
      "get": {
        "tags": [
          "Root"
        ],
        "summary": "Application Information",
        "description": "Detailed application configuration and environment information",
        "operationId": "Root-app_info",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CacheMetricsResponse": {
        "properties": {
          "hits": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Hits"
          },
          "misses": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Misses"
          },
          "errors": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Errors"
          },
          "circuit_open": {
            "type": "boolean",
            "title": "Circuit Open"
          },
          "memory_entries": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Memory Entries"
          }
        },
        "type": "object",
        "required": [
          "hits",
          "misses",
          "errors",
          "circuit_open",
          "memory_entries"
        ],
        "title": "CacheMetricsResponse"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "example": "healthy"
          },
          "database": {
            "type": "boolean",
            "title": "Database",
            "example": true
          },
          "models": {
            "type": "boolean",
            "title": "Models",
            "example": true
          },
          "model_loading": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Loading",
            "default": false,
            "example": false
          },
          "model_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Error",
            "example": "No model available"
          },
          "cache": {
            "type": "boolean",
            "title": "Cache",
            "example": true
          },
          "cache_metrics": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CacheMetricsResponse"
              },
              {
                "type": "null"
              }
            ]
          },
          "latency_ms": {
            "type": "number",
            "minimum": 0.0,
            "title": "Latency Ms",
            "example": 12.5
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "status",
          "database",
          "models",
          "cache",
          "latency_ms"
        ],
        "title": "HealthResponse"
      },
      "InsightsRequest": {
        "properties": {
          "matchup": {
            "type": "string",
            "title": "Matchup",
            "description": "Match matchup in format 'Home Team vs Away Team'",
            "example": "Manchester United vs Liverpool"
          },
          "league": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "League",
            "description": "League identifier (EPL, La Liga, etc.)",
            "example": "EPL"
          }
        },
        "type": "object",
        "required": [
          "matchup"
        ],
        "title": "InsightsRequest"
      },
      "InsightsResponse": {
        "properties": {
          "matchup": {
            "type": "string",
            "title": "Matchup",
            "example": "Manchester City vs Liverpool"
          },
          "league": {
            "type": "string",
            "title": "League",
            "example": "EPL"
          },
          "metadata": {
            "$ref": "#/components/schemas/Metadata"
          },
          "predictions": {
            "$ref": "#/components/schemas/PredictionData"
          },
          "xg_analysis": {
            "$ref": "#/components/schemas/XGData"
          },
          "value_analysis": {
            "type": "object",
            "title": "Value Analysis",
            "description": "Enhanced value betting analysis"
          },
          "monte_carlo": {
            "$ref": "#/components/schemas/MonteCarloData"
          },
          "scenarios": {
            "items": {
              "$ref": "#/components/schemas/Scenario"
            },
            "type": "array",
            "title": "Scenarios"
          },
          "explanation": {
            "type": "object",
            "title": "Explanation"
          },
          "risk_assessment": {
            "$ref": "#/components/schemas/RiskAssessment"
          },
          "narrative": {
            "type": "string",
            "title": "Narrative",
            "description": "Human-readable analysis summary"
          },
          "generated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Generated At"
          },
          "confidence_level": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence Level",
            "example": 0.78
          }
        },
        "type": "object",
        "required": [
          "matchup",
          "league",
          "metadata",
          "predictions",
          "xg_analysis",
          "value_analysis",
          "monte_carlo",
          "risk_assessment",
          "narrative",
          "confidence_level"
        ],
        "title": "InsightsResponse"
      },
      "LeagueCode": {
        "type": "string",
        "enum": [
          "epl",
          "bundesliga",
          "la_liga",
          "serie_a",
          "ligue_1"
        ],
        "title": "LeagueCode",
        "description": "Supported leagues"
      },
      "MatchDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "home_team": {
            "type": "string",
            "title": "Home Team"
          },
          "away_team": {
            "type": "string",
            "title": "Away Team"
          },
          "league": {
            "type": "string",
            "title": "League"
          },
          "match_date": {
            "type": "string",
            "format": "date-time",
            "title": "Match Date"
          },
          "venue": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Venue"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "scheduled"
          },
          "odds": {
            "anyOf": [
              {
                "additionalProperties": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Odds"
          },
          "referee": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Referee"
          },
          "season": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Season"
          },
          "round_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Round Number"
          }
        },
        "type": "object",
        "required": [
          "id",
          "home_team",
          "away_team",
          "league",
          "match_date"
        ],
        "title": "MatchDetailResponse",
        "description": "Lightweight match detail payload used by public endpoints."
      },
      "MatchListResponse": {
        "properties": {
          "matches": {
            "items": {
              "$ref": "#/components/schemas/MatchSummary"
            },
            "type": "array",
            "title": "Matches"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "league_filter": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "League Filter"
          },
          "date_range_days": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date Range Days"
          }
        },
        "type": "object",
        "required": [
          "matches",
          "total"
        ],
        "title": "MatchListResponse",
        "description": "Container for a list of matches with simple summary items."
      },
      "MatchPredictionRequest": {
        "properties": {
          "match_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Id"
          },
          "home_team": {
            "type": "string",
            "maxLength": 100,
            "minLength": 2,
            "title": "Home Team"
          },
          "away_team": {
            "type": "string",
            "maxLength": 100,
            "minLength": 2,
            "title": "Away Team"
          },
          "league": {
            "$ref": "#/components/schemas/LeagueCode",
            "description": "League identifier"
          },
          "kickoff_time": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kickoff Time"
          },
          "odds": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Odds",
            "description": "Market odds (home_win, draw, away_win)"
          },
          "bankroll": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 100000000.0,
                "minimum": 1000.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Bankroll",
            "description": "Bankroll in Naira (\u20a6) for Kelly calculation",
            "default": 10000
          }
        },
        "type": "object",
        "required": [
          "home_team",
          "away_team",
          "league"
        ],
        "title": "MatchPredictionRequest",
        "description": "Request model for match prediction"
      },
      "MatchSearchResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "example": "1"
          },
          "home_team": {
            "type": "string",
            "title": "Home Team",
            "example": "Manchester City"
          },
          "away_team": {
            "type": "string",
            "title": "Away Team",
            "example": "Liverpool"
          },
          "league": {
            "type": "string",
            "title": "League",
            "example": "EPL"
          },
          "match_date": {
            "type": "string",
            "title": "Match Date",
            "example": "2024-10-26T15:00:00Z"
          },
          "venue": {
            "type": "string",
            "title": "Venue",
            "example": "Etihad Stadium"
          }
        },
        "type": "object",
        "required": [
          "id",
          "home_team",
          "away_team",
          "league",
          "match_date",
          "venue"
        ],
        "title": "MatchSearchResponse"
      },
      "MatchSummary": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "home_team": {
            "type": "string",
            "title": "Home Team"
          },
          "away_team": {
            "type": "string",
            "title": "Away Team"
          },
          "league": {
            "type": "string",
            "title": "League"
          },
          "match_date": {
            "type": "string",
            "format": "date-time",
            "title": "Match Date"
          },
          "venue": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Venue"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "scheduled"
          },
          "has_odds": {
            "type": "boolean",
            "title": "Has Odds",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "id",
          "home_team",
          "away_team",
          "league",
          "match_date"
        ],
        "title": "MatchSummary",
        "description": "Lean response tailored for listings and search results."
      },
      "Metadata": {
        "properties": {
          "matchup": {
            "type": "string",
            "title": "Matchup",
            "example": "Manchester City vs Liverpool"
          },
          "league": {
            "type": "string",
            "title": "League",
            "example": "EPL"
          },
          "home_team": {
            "type": "string",
            "title": "Home Team",
            "example": "Manchester City"
          },
          "away_team": {
            "type": "string",
            "title": "Away Team",
            "example": "Liverpool"
          }
        },
        "type": "object",
        "required": [
          "matchup",
          "league",
          "home_team",
          "away_team"
        ],
        "title": "Metadata"
      },
      "MonteCarloData": {
        "properties": {
          "simulations": {
            "type": "integer",
            "title": "Simulations",
            "example": 10000
          },
          "distribution": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Distribution",
            "example": {
              "away_win": 0.15,
              "draw": 0.2,
              "home_win": 0.65
            }
          },
          "confidence_intervals": {
            "additionalProperties": {
              "items": {
                "type": "number"
              },
              "type": "array"
            },
            "type": "object",
            "title": "Confidence Intervals",
            "example": {
              "home_win": [
                0.63,
                0.67
              ]
            }
          }
        },
        "type": "object",
        "required": [
          "simulations",
          "distribution",
          "confidence_intervals"
        ],
        "title": "MonteCarloData"
      },
      "OddsCreate": {
        "properties": {
          "match_id": {
            "type": "string",
            "title": "Match Id",
            "description": "Associated match identifier"
          },
          "bookmaker": {
            "type": "string",
            "title": "Bookmaker",
            "description": "Bookmaker name"
          },
          "home_win": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Home Win"
          },
          "draw": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Draw"
          },
          "away_win": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Away Win"
          },
          "over_under": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Over Under"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "match_id",
          "bookmaker"
        ],
        "title": "OddsCreate",
        "description": "Payload used when ingesting odds snapshots."
      },
      "OddsResponse": {
        "properties": {
          "match_id": {
            "type": "string",
            "title": "Match Id",
            "description": "Associated match identifier"
          },
          "bookmaker": {
            "type": "string",
            "title": "Bookmaker",
            "description": "Bookmaker name"
          },
          "home_win": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Home Win"
          },
          "draw": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Draw"
          },
          "away_win": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Away Win"
          },
          "over_under": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Over Under"
          },
          "id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "match_id",
          "bookmaker"
        ],
        "title": "OddsResponse",
        "description": "API response model for odds data."
      },
      "PredictionData": {
        "properties": {
          "home_win_prob": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Home Win Prob",
            "example": 0.65
          },
          "draw_prob": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Draw Prob",
            "example": 0.2
          },
          "away_win_prob": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Away Win Prob",
            "example": 0.15
          },
          "prediction": {
            "type": "string",
            "title": "Prediction",
            "example": "home_win"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "example": 0.78
          }
        },
        "type": "object",
        "required": [
          "home_win_prob",
          "draw_prob",
          "away_win_prob",
          "prediction",
          "confidence"
        ],
        "title": "PredictionData"
      },
      "PredictionResponse": {
        "properties": {
          "match_id": {
            "type": "string",
            "title": "Match Id"
          },
          "home_team": {
            "type": "string",
            "title": "Home Team"
          },
          "away_team": {
            "type": "string",
            "title": "Away Team"
          },
          "league": {
            "$ref": "#/components/schemas/LeagueCode"
          },
          "predictions": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Predictions",
            "description": "Probabilities for home_win, draw, away_win"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Highest probability"
          },
          "brier_score": {
            "type": "number",
            "maximum": 2.0,
            "minimum": 0.0,
            "title": "Brier Score",
            "description": "Expected Brier score"
          },
          "value_bets": {
            "items": {
              "$ref": "#/components/schemas/ValueBetResponse"
            },
            "type": "array",
            "title": "Value Bets",
            "description": "Identified value betting opportunities"
          },
          "confidence_intervals": {
            "additionalProperties": {
              "prefixItems": [
                {
                  "type": "number"
                },
                {
                  "type": "number"
                }
              ],
              "type": "array",
              "maxItems": 2,
              "minItems": 2
            },
            "type": "object",
            "title": "Confidence Intervals",
            "description": "95% confidence intervals for each outcome"
          },
          "explanations": {
            "type": "object",
            "title": "Explanations",
            "description": "SHAP feature importance and explanations"
          },
          "metadata": {
            "type": "object",
            "title": "Metadata",
            "description": "Model metadata and performance metrics"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "match_id",
          "home_team",
          "away_team",
          "league",
          "predictions",
          "confidence",
          "brier_score"
        ],
        "title": "PredictionResponse",
        "description": "Comprehensive match prediction response",
        "example": {
          "away_team": "Liverpool",
          "brier_score": 0.178,
          "confidence": 0.421,
          "created_at": "2025-11-11T14:32:00Z",
          "home_team": "Arsenal",
          "league": "epl",
          "match_id": "epl_2025_234",
          "metadata": {
            "league_model": "epl",
            "model_version": "3.0",
            "processing_time_ms": 142
          },
          "predictions": {
            "away_win": 0.293,
            "draw": 0.286,
            "home_win": 0.421
          },
          "value_bets": [
            {
              "edge_ngn": 186,
              "kelly_stake_ngn": 53720,
              "market": "home_win",
              "match_id": "epl_2025_234",
              "odds": 1.96
            }
          ]
        }
      },
      "RiskAssessment": {
        "properties": {
          "risk_level": {
            "type": "string",
            "title": "Risk Level",
            "example": "low"
          },
          "confidence_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence Score",
            "example": 0.78
          },
          "value_available": {
            "type": "boolean",
            "title": "Value Available",
            "example": true
          },
          "best_bet": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ValueBet"
              },
              {
                "type": "null"
              }
            ]
          },
          "distribution": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Distribution"
          },
          "recommendation": {
            "type": "string",
            "title": "Recommendation",
            "example": "Proceed"
          }
        },
        "type": "object",
        "required": [
          "risk_level",
          "confidence_score",
          "value_available",
          "recommendation"
        ],
        "title": "RiskAssessment"
      },
      "Scenario": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "example": "Most Likely"
          },
          "probability": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Probability",
            "example": 0.65
          },
          "home_score": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Home Score",
            "example": 2
          },
          "away_score": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Away Score",
            "example": 1
          },
          "result": {
            "type": "string",
            "title": "Result",
            "example": "home_win"
          }
        },
        "type": "object",
        "required": [
          "name",
          "probability",
          "home_score",
          "away_score",
          "result"
        ],
        "title": "Scenario"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ValueBet": {
        "properties": {
          "bet_type": {
            "type": "string",
            "title": "Bet Type",
            "example": "home_win"
          },
          "market_odds": {
            "type": "number",
            "exclusiveMinimum": 0.0,
            "title": "Market Odds",
            "example": 2.1
          },
          "model_prob": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Model Prob",
            "example": 0.65
          },
          "market_prob": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Market Prob",
            "example": 0.476
          },
          "expected_value": {
            "type": "number",
            "title": "Expected Value",
            "example": 0.152
          },
          "value_pct": {
            "type": "number",
            "title": "Value Pct",
            "example": 36.6
          },
          "kelly_stake": {
            "type": "number",
            "minimum": 0.0,
            "title": "Kelly Stake",
            "example": 0.05
          },
          "confidence_interval": {
            "items": {
              "type": "number"
            },
            "type": "array",
            "title": "Confidence Interval",
            "example": [
              0.58,
              0.72
            ]
          },
          "edge": {
            "type": "number",
            "title": "Edge",
            "example": 0.174
          },
          "recommendation": {
            "type": "string",
            "title": "Recommendation",
            "example": "Strong bet"
          },
          "quality": {
            "$ref": "#/components/schemas/ValueBetQuality"
          }
        },
        "type": "object",
        "required": [
          "bet_type",
          "market_odds",
          "model_prob",
          "market_prob",
          "expected_value",
          "value_pct",
          "kelly_stake",
          "confidence_interval",
          "edge",
          "recommendation",
          "quality"
        ],
        "title": "ValueBet"
      },
      "ValueBetQuality": {
        "properties": {
          "quality_score": {
            "type": "number",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Quality Score",
            "example": 75.5
          },
          "tier": {
            "type": "string",
            "title": "Tier",
            "example": "Good"
          },
          "recommendation": {
            "type": "string",
            "title": "Recommendation",
            "example": "Consider betting"
          },
          "ev_contribution": {
            "type": "number",
            "title": "Ev Contribution",
            "example": 15.2
          },
          "confidence_contribution": {
            "type": "number",
            "title": "Confidence Contribution",
            "example": 39.0
          },
          "liquidity_contribution": {
            "type": "number",
            "title": "Liquidity Contribution",
            "example": 18.75
          }
        },
        "type": "object",
        "required": [
          "quality_score",
          "tier",
          "recommendation",
          "ev_contribution",
          "confidence_contribution",
          "liquidity_contribution"
        ],
        "title": "ValueBetQuality"
      },
      "ValueBetResponse": {
        "properties": {
          "match_id": {
            "type": "string",
            "title": "Match Id",
            "description": "Match identifier"
          },
          "market": {
            "type": "string",
            "title": "Market",
            "description": "Market name, e.g. home_win"
          },
          "odds": {
            "type": "number",
            "minimum": 1.01,
            "title": "Odds",
            "description": "Offered decimal odds"
          },
          "fair_probability": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Fair Probability"
          },
          "implied_probability": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Implied Probability"
          },
          "edge_percent": {
            "type": "number",
            "title": "Edge Percent",
            "description": "Edge expressed as percentage"
          },
          "edge_ngn": {
            "type": "number",
            "title": "Edge Ngn",
            "description": "Edge translated to Naira per \u20a610k stake"
          },
          "kelly_stake_ngn": {
            "type": "number",
            "minimum": 0.0,
            "title": "Kelly Stake Ngn",
            "description": "Recommended stake in Naira"
          },
          "kelly_fraction": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Kelly Fraction",
            "description": "Kelly fraction applied"
          },
          "clv_ngn": {
            "type": "number",
            "title": "Clv Ngn",
            "description": "Estimated closing line value in Naira"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence"
          },
          "expected_roi": {
            "type": "number",
            "title": "Expected Roi",
            "description": "Expected ROI for this value bet"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "pinnacle_close": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 1.01
              },
              {
                "type": "null"
              }
            ],
            "title": "Pinnacle Close",
            "description": "Reference Pinnacle closing price, if available"
          }
        },
        "type": "object",
        "required": [
          "match_id",
          "market",
          "odds",
          "fair_probability",
          "implied_probability",
          "edge_percent",
          "edge_ngn",
          "kelly_stake_ngn",
          "kelly_fraction",
          "clv_ngn",
          "confidence",
          "expected_roi"
        ],
        "title": "ValueBetResponse",
        "description": "Rich description of a detected value betting opportunity.",
        "example": {
          "clv_ngn": 81.0,
          "confidence": 0.847,
          "created_at": "2025-11-11T14:32:00Z",
          "edge_ngn": 186.0,
          "edge_percent": 9.3,
          "expected_roi": 0.089,
          "fair_probability": 0.563,
          "implied_probability": 0.51,
          "kelly_fraction": 0.125,
          "kelly_stake_ngn": 53720.0,
          "market": "home_win",
          "match_id": "epl_2025_234",
          "odds": 1.96
        }
      },
      "XGData": {
        "properties": {
          "home_xg": {
            "type": "number",
            "minimum": 0.0,
            "title": "Home Xg",
            "example": 2.1
          },
          "away_xg": {
            "type": "number",
            "minimum": 0.0,
            "title": "Away Xg",
            "example": 1.3
          },
          "total_xg": {
            "type": "number",
            "minimum": 0.0,
            "title": "Total Xg",
            "example": 3.4
          },
          "xg_difference": {
            "type": "number",
            "title": "Xg Difference",
            "example": 0.8
          }
        },
        "type": "object",
        "required": [
          "home_xg",
          "away_xg",
          "total_xg",
          "xg_difference"
        ],
        "title": "XGData"
      }
    }
  },
  "tags": [
    {
      "name": "Root",
      "description": "Root and system endpoints"
    },
    {
      "name": "Health",
      "description": "Health check and monitoring endpoints"
    },
    {
      "name": "Auth",
      "description": "Authentication and authorization"
    },
    {
      "name": "Matches",
      "description": "Match data and operations"
    },
    {
      "name": "Predictions",
      "description": "Prediction operations"
    },
    {
      "name": "Odds",
      "description": "Odds comparison and operations"
    },
    {
      "name": "Users",
      "description": "User management"
    }
  ]
}